{{- $architecture := or .architecture "arm64" -}}
{{- $ssh := or .ssh "" -}}

architecture: {{ $architecture }}

actions:
  - action: apt
    recommends: false
    description: Install base packages
    packages:
# Base system (from mobian-base)
      - alsa-ucm-conf
      - alsa-utils
      - apt-utils
      - busybox
      - ca-certificates
      - console-data
      - console-setup
      - device-tree-compiler
      - dosfstools
      - e2fsprogs
      - file
      - hwdata
      - kbd
      - locales
      - locales-all
      - man-db
      - mmc-utils
      - patch
      - pipewire-audio
      - python3-dbus
      - rtkit
      - sudo
      - usb-modeswitch
      - usbutils
      - wireplumber
# PinePhone Pro utils
      - linux-image-arm64
      - linux-headers-arm64
# ParrotOS essentials
      - curl
      - vim
      - htop
# Network & Bluetooth
      - network-manager
      - bluetooth
      - wpasupplicant
      - wireless-tools
      - rfkill
# Audio (PinePhone)
      - libspa-0.2-bluetooth
# Systemd networking
      - systemd-resolved
      - bzip2
      - xz-utils
      - zstd
# Utils
      - inetutils-ping
      - iptables
      - net-tools
{{ if $ssh }}
      - openssh-server
{{ end }}
      - systemd-repart
      # Reason for this: it's @a-wai's preferred editor
      - vim
