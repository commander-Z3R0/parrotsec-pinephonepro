{{- $architecture := or .architecture "arm64" -}}

architecture: {{ $architecture }}

actions:
  - action: apt
    recommends: false
    description: Install Phosh packages
    packages:
      - phosh
      - feedbackd
      - iio-sensor-proxy
      - fonts-noto
      - fonts-noto-color-emoji
      - mesa-vulkan-drivers
      - mesa-va-drivers     
      - network-manager-applet
      - xdg-desktop-portal-wlr
  # Additional software we don't want metapackages to depend on
      - cracklib-runtime # needed for pw change in UI, but g-c-c only recommends it
      - iproute2
      - wget
      - nano
      - chatty
      - endeavour
      - firefox-esr
      - gnome-calendar
      - gnome-console
      - gnome-software
      - gnome-software-plugin-deb
      - gnome-text-editor
      - gnome-usage
      - loupe
      - papers
      - phosh-mobile-settings
      - phosh-plugins
      - phosh-wallpapers
      - phrog
      - portfolio-filemanager
      - powersupply-gtk
      - polkitd
      - pkexec
      - sound-theme-phosh
      - ssh
      - webext-ublock-origin-firefox

  - action: run
    description: Disable getty in the Phosh environment
    chroot: true
    command: systemctl disable getty@.service
